<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registrar Nuevo Socio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .section-title {
            background: #198754;
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        .card { border-radius: 12px; }
        .form-section {
            background: white;
            border-radius: 10px;
            padding: 20px 25px;
            box-shadow: 0 1px 6px rgba(0,0,0,0.1);
        }
        .form-label { font-weight: 600; }
        .plan-summary {
            background: #f0f8f5;
            border: 1px solid #19875440;
            border-radius: 8px;
            padding: 10px 15px;
            margin-top: 10px;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
{% extends 'users/base_dashboard.html' %}
{% block title %}Nuevo Socio{% endblock %}
{% block content %}
<div class="container mt-4">
  <h3 class="fw-bold mb-4">ðŸ§¾ Registrar Nuevo Socio</h3>

  <form method="POST" class="card p-4 shadow-sm">
    {% csrf_token %}
    <div class="row mb-3">
      <div class="col-md-4">
        <label class="form-label">RUT</label>
        <input type="text" name="rut" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Nombre</label>
        <input type="text" name="nombre" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Apellido Paterno</label>
        <input type="text" name="apellido_paterno" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-4">
        <label class="form-label">Apellido Materno</label>
        <input type="text" name="apellido_materno" class="form-control">
      </div>
      <div class="col-md-4">
        <label class="form-label">Correo</label>
        <input type="email" name="correo" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">TelÃ©fono</label>
        <input type="text" name="telefono" class="form-control">
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Fecha de nacimiento</label>
        <input type="date" name="fecNac" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label">Plan</label>
        <select name="plan" class="form-select" required>
          <option value="">-- Seleccionar --</option>
          {% for plan in planes %}
            <option value="{{ plan.id }}">{{ plan.nombre }} (${{ plan.precio }})</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Forma de pago</label>
        <select name="forma_pago" class="form-select">
          <option value="efectivo">Efectivo</option>
          <option value="tarjeta">Tarjeta</option>
          <option value="transferencia">Transferencia</option>
        </select>
      </div>
    </div>

    <div class="text-end">
      <button type="submit" class="btn btn-dark text-warning fw-bold">Registrar</button>
      <a href="{% url 'lista_socios' %}" class="btn btn-outline-secondary">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}


<script>
function actualizarResumen() {
    const planSelect = document.getElementById("plan");
    const selected = planSelect.options[planSelect.selectedIndex];
    const precio = selected.getAttribute("data-precio");
    const duracion = selected.getAttribute("data-duracion");
    const beneficios = selected.getAttribute("data-beneficios");

    document.getElementById("precio").value = precio ? `$${precio}` : "";
    document.getElementById("duracion").value = duracion || "";

    const resumen = document.getElementById("planResumen");
    const textoBeneficios = document.getElementById("beneficios");
    if (beneficios) {
        textoBeneficios.textContent = beneficios;
        resumen.style.display = "block";
    } else {
        resumen.style.display = "none";
    }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
